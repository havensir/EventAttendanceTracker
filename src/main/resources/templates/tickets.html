<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: shell(
        'tickets',
        ${hero} ?: 'Your Tickets',
        ~{::content}
      )}">

  <th:block th:fragment="content">
    <style>
      /* Page-only styles */
      .wrap{
        margin: 36px 35px 42px;           /* top margin added so it never hugs the hero */
      }
      .card{
        background:#fff;
        border:1px solid var(--line);
        border-radius:16px;
        padding:22px;
        box-shadow:0 2px 10px rgba(0,0,0,.04);
      }
      .headerRow{
        display:flex;
        justify-content:space-between;
        align-items:center;
        gap:12px;
        margin-bottom:10px;
      }
      .sub{
        color:var(--muted);
        font-size:14px;
        margin-top:4px;
      }

      .table{
        margin-top:6px;
        border-top:1px solid #eee;
      }
      .row{
        display:grid;
        grid-template-columns:1.2fr 0.9fr 0.9fr auto;
        gap:12px;
        padding:14px 0;
        border-bottom:1px solid #f0f0f0;
        align-items:center;
      }
      .head{
        font-weight:800;
        color:#444;
        border-bottom:none;
        padding-top:10px;
        padding-bottom:10px;
      }
      .muted{ color:#616161; font-size:14px }

      .btn{
        display:inline-flex;align-items:center;justify-content:center;
        padding:10px 14px;border-radius:12px;font-weight:800;text-decoration:none;
        transition:.15s ease;
      }
      .btn.primary{ background:#3b2a17; color:#fff; border:1px solid #3b2a17 }
      .btn.primary:hover{ filter:brightness(1.06) }
      .btn.ghost{ background:#fff; color:#101010; border:1px solid var(--line) }
      .btn.ghost:hover{ background:#f7f7f7 }

      /* Empty state */
      .empty{
        margin-top:8px;
        background:linear-gradient(135deg,#fafafa 0%,#f3f5f2 100%);
        border:1px dashed #dadada;
        border-radius:16px;
        padding:24px;
        text-align:center;
      }
      .empty h3{ margin:0 0 6px; font-size:20px }
      .empty p{ margin:0 0 14px; color:#616161 }
      .emoji{
        font-size:32px; line-height:1; margin-bottom:6px; opacity:.9;
        display:inline-block;
      }

      @media (max-width:980px){
        .wrap{ margin: 24px 16px 32px }
        .row{ grid-template-columns:1fr; gap:8px }
      }
    </style>

    <div class="wrap">
      <div class="card">
        <div class="headerRow">
          <div>
            <h2 style="margin:0">Your Tickets</h2>
            <div class="sub">All the events you‚Äôve RSVP‚Äôd to‚Äîneatly in one place.</div>
          </div>
          <a th:href="@{/ui/events}" class="btn ghost">Browse Events</a>
        </div>

        <!-- Empty state -->
        <div class="empty" th:if="${#lists.isEmpty(myTickets)}">
          <div class="emoji">üóìÔ∏è</div>
          <h3>No tickets yet</h3>
          <p>
            Looks like your calendar is wide open. Find something fun on the Events page!
          </p>
          <a th:href="@{/ui/events}" class="btn primary">Explore Events</a>
        </div>

        <!-- Table -->
        <div class="table" th:if="${!#lists.isEmpty(myTickets)}">
          <div class="row head">
            <div>Event</div>
            <div>When</div>
            <div>Where</div>
            <div></div>
          </div>

          <div class="row" th:each="t : ${myTickets}">
            <div>
              <a th:href="@{|/ui/events/${t.eventId}|}"
                 th:text="${eventsById[t.eventId]?.name} ?: 'Event'">Event</a>
              <div class="muted" style="font-size:13px;">
                Ticket: <span th:text="${t.id}">A-XXXXXX</span> ¬∑
                <span th:text="${t.firstName + ' ' + t.lastName}">Name</span>
              </div>
            </div>

            <div th:text="${eventsById[t.eventId]?.dateTime} ?: 'Date/Time'">Date/Time</div>
            <div th:text="${eventsById[t.eventId]?.location} ?: 'Location'">Location</div>

            <div style="display:flex; gap:8px; justify-content:flex-end;">
              <a class="btn primary" th:href="@{|/ui/tickets/${t.id}|}">View Ticket</a>
            </div>
          </div>

          <div style="margin-top:14px; display:flex; gap:10px;">
            <a th:href="@{/ui/events}" class="btn ghost">Browse More Events</a>
          </div>
        </div>
      </div>
    </div>
  </th:block>
</html>
