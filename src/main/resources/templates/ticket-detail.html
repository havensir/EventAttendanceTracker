<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: shell(
        'tickets',
        ${'Your Ticket'},
        ~{::content}
      )}">

  <th:block th:fragment="content">
    <style>
      .wrap{ max-width:900px; margin:48px auto 64px; padding:0 24px; }
      .card{
        background:#fff; border:1px solid var(--line); border-radius:16px; padding:22px;
        box-shadow:0 2px 12px rgba(0,0,0,.05);
      }

      /* Header */
      .hdr{ display:flex; align-items:flex-start; justify-content:space-between; gap:16px; margin-bottom:10px }
      .title{ margin:0; font-size:28px; font-weight:900; color:var(--ink) }
      .sub{ margin:6px 0 0; color:var(--muted); font-size:14px }

      /* Ticket code chip */
      .code{
        margin:16px 0 6px; display:inline-flex; align-items:center; gap:10px; padding:10px 14px;
        border:1px dashed var(--line); border-radius:12px; background:#fff;
        font:600 18px ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; letter-spacing:1px;
      }
      .code-badge{
        font-size:12px; padding:4px 8px; border-radius:8px; border:1px solid var(--line); background:var(--surface); color:#333
      }

      /* Info panels */
      .grid{ display:grid; grid-template-columns:1fr 1fr; gap:18px; margin-top:14px }
      .panel{ background:var(--surface); border:1px solid var(--line); border-radius:12px; padding:16px }
      .panel h3{
        margin:0 0 10px; font-size:12px; letter-spacing:.6px; text-transform:uppercase; color:var(--muted)
      }
      .row{ display:flex; gap:8px; margin:8px 0; font-size:15px; line-height:1.35 }
      .row strong{ min-width:110px; color:#333 }

      /* Actions */
      .actions{
        display:flex; gap:10px; flex-wrap:wrap; margin-top:16px; justify-content:flex-end
      }
      .btn{
        --btn-bg:#fff; --btn-fg:var(--ink); --btn-bd:var(--line);
        display:inline-flex; align-items:center; gap:10px;
        padding:10px 14px; border-radius:12px; font-weight:800; text-decoration:none; cursor:pointer;
        border:1px solid var(--btn-bd); background:var(--btn-bg); color:var(--btn-fg); transition:.15s ease;
      }
      .btn:hover{ filter:brightness(.98) }
      .btn.primary{
        --btn-bg:#371700;
        --btn-fg:#fff;
      }

      /* Icons */
      .icon{ width:18px; height:18px; display:inline-block; }
      .icon path{ stroke:currentColor; stroke-width:2; fill:none; stroke-linecap:round; stroke-linejoin:round }

      /* Toast */
      .toast{ position:fixed; right:22px; top:22px; background:#0a7a3e; color:#fff; padding:12px 14px; border-radius:10px; box-shadow:0 8px 20px rgba(0,0,0,.15); z-index:1000 }

      @media (max-width:880px){ .grid{ grid-template-columns:1fr } .hdr{ flex-direction:column; align-items:flex-start } }
    </style>

    <div th:if="${param.rsvped}" class="toast">Ticket created — you’re in!</div>

    <div class="wrap">
      <div class="card">

        <!-- Header with quick actions on the right -->
        <div class="hdr">
          <div>
            <h1 class="title" th:text="${event.name}">Event Name</h1>
            <p class="sub">Show this ticket at the door or download a copy.</p>
          </div>
          
        </div>

        <!-- Ticket code -->
        <div class="code">
          <span class="code-badge">Ticket</span>
          <span th:text="${attendee.id}">A-XXXXXX</span>
        </div>

        <!-- Info -->
        <div class="grid">
          <div class="panel">
            <h3>Event</h3>
            <div class="row"><strong>Date/Time</strong><span th:text="${event.dateTime}">Date/Time</span></div>
            <div class="row"><strong>Location</strong><span th:text="${event.location}">Location</span></div>
            <div class="row"><strong>Capacity</strong><span th:text="${event.capacity}">0</span></div>
          </div>
          <div class="panel">
            <h3>Attendee</h3>
            <div class="row"><strong>Name</strong>
              <span th:text="${attendee.firstName + ' ' + attendee.lastName}">Name</span></div>
            <div class="row"><strong>Email</strong><span th:text="${attendee.email}">email</span></div>
            <div class="row"><strong>Phone</strong><span th:text="${attendee.phone}">phone</span></div>
          </div>
        </div>

        <!-- Bottom actions (mobile-friendly duplication) -->
        <div class="actions">
          <a class="btn" th:href="@{/ui/events/my}">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M15 18l-6-6 6-6"/></svg>
            My Tickets
          </a>
          <a class="btn" th:href="@{|/ui/events/${event.id}|}">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true"><path d="M9 18l6-6-6-6"/></svg>
            View Event
          </a>
          <a class="btn primary" th:href="@{|/ui/tickets/${attendee.id}/download|}">
            <svg class="icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 3v12"/>
              <path d="M7 10l5 5 5-5"/>
              <path d="M5 21h14"/>
            </svg>
            Download PDF
          </a>
        </div>

      </div>
    </div>

    <script>const t=document.querySelector('.toast'); if(t) setTimeout(()=>t.remove(),2500);</script>
  </th:block>
</html>
